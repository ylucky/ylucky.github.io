<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>百度文库评分</title>
    <link href="../../css/bootstrap.min.css" rel="stylesheet">
	<style>
	.stars span{
		display: inline-block;
		width: 32px;
		height: 34px;
		display: inline-block;
	}
	.effect{
		position: fixed;
		left: 50%;
		top:0px;
	}
	.effect img{
		display: inline-block;
		max-width: 500px;
	}
	</style>
</head>
<body>
	<div class="container">
			<h3>百度文库评分</h3>
			<div class="stars">
				<p><i class="glyphicon glyphicon-cog"></i>总体评价:</p>
				<p id="star">
					<img src="../../img/star-none.png" alt="">
					<img src="../../img/star-none.png" alt="">
					<img src="../../img/star-none.png" alt="">
					<img src="../../img/star-none.png" alt="">
					<img src="../../img/star-none.png" alt="">
				</p>
				<small>小提示：点击星星就能打分</small>
			</div>
	</div>
	<div class="effect">
		<h2>效果图：</h2>
		<h3>百度文库评分</h3>
		<img src="01.gif" alt="百度文库评分">
	</div>
	<script>
		window.onload = function(){
			var aStar = document.getElementById('star');
			var stars = aStar.getElementsByTagName('img');
			var small = document.getElementsByTagName('small')[0];
			var text = ['很差','较差','还行','一般','可以'];
			var imgSrc = ['../../img/star-sad.png','../../img/star-none.png','../../img/star-full.png','../../img/star-half.png'];
			var num = null;
			var oldImg = [];
			var oldText = "";
			
			function Text(index,imgSrc){
				console.log(index,imgSrc);
				console.log(index.length,stars[index].src)
				for(let i = 0; i <= index; i++) {
					stars[i].src = imgSrc;
				}
				switch(index){
					case 0:
						small.innerHTML = text[0];
						break;
					case 1:
						small.innerHTML = text[1];
						break;
					case 2:
						small.innerHTML = text[2];
						break;
					case 3:
						small.innerHTML = text[3];
						break;
					default:
						small.innerHTML = text[4];
				}
			}


			for (var i = 0; i < stars.length; i++) {
			 	stars[i].index = i;
			 	stars[i].onclick = function(){
	 		 		num = this.index;
	 		 		for (let i = 0; i < stars.length; i++) {
	 		 			stars[i].src = imgSrc[1];
	 		 		}
	 		 		if( num < 2 ){
	 					Text(num, imgSrc[0]);
	 				} else {
	 					Text(num, imgSrc[2]);
	 				}	
	 				oldText = small.innerHTML;
			 	}
			 	stars[i].onmouseover = function(){
			 		num = this.index;
			 		for (let i = 0; i < stars.length; i++) {
			 			stars[i].src = imgSrc[1];
			 		}
			 		if( num < 2 ){
						Text(num, imgSrc[0]);
					} else {
						Text(num, imgSrc[2]);
					}			 		
			 	}
			 	stars[i].onmouseout = function(){
					for (var i = 0; i < stars.length; i++) {
						stars[i].src= oldImg[i];
					}
					small.innerHTML = oldText;
			 	}
			 } 

			 

		}
	</script>
</body>
</html>